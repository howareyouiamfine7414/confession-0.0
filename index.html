<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>0.0</title>
  <meta name="description" content="‰∫íÂãïÂ∞èË¶ñÁ™óÔºàÂê´Èü≥ÊïàÂïüÂãï„ÄÅÂïµËÅ≤„ÄÅÂèÆËÅ≤ËàáÁ¶ÆÁâ©Êè≠ÊõâÁâπÊïàÔºâ„ÄÇ" />
  <link rel="icon" href="data:," />
  <style>
    :root{ --bg1:#f5e1ff; --bg2:#fde3f1; --card:rgba(255,255,255,.92);
           --text:#111827; --sub:#6b7280; --border:#e9d5ff; --accent:#a21caf; }
    html,body{height:100%;margin:0}
    body{ min-height:100%; background:linear-gradient(180deg,var(--bg1),var(--bg2),#fff);
          display:flex;align-items:center;justify-content:center;padding:24px;
          font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans";
          color:var(--text); }
    .card{ width:min(640px,92vw); background:var(--card); border:1px solid var(--border);
           border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:22px }
    h1{font-size:22px;margin:6px 0 0;line-height:1.35}
    .options{margin-top:16px;display:grid;gap:10px}
    .btn{ text-align:left;border:1px solid var(--border);background:#fff;border-radius:12px;
          padding:12px 14px;font-weight:600;cursor:pointer;transition:transform .06s, box-shadow .12s }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 8px 16px rgba(162,28,175,.12) }
    .msg{margin-top:12px;text-align:center;color:var(--sub);font-size:14px}
    .end{text-align:center}
    .heart{font-size:28px}
    .giftTip{margin:6px 0 8px;font-size:13px;color:var(--sub)}
    .giftImg{ max-height:360px; max-width:90%; width:auto; height:auto; display:block; margin:0 auto;
              border-radius:12px; border:1px solid var(--border); object-fit:contain;
              filter:blur(6px); transform:scale(.92); transition:filter .25s, transform .25s; cursor:pointer }
    .giftImg.revealed{ filter:blur(0); transform:scale(1); cursor:default }
    .center{display:flex;align-items:center;justify-content:center;min-height:200px;flex-direction:column}
    .startBtn{ appearance:none; border:1px solid var(--border); background:#fff; color:var(--text);
               padding:14px 18px; border-radius:999px; font-weight:700; cursor:pointer;
               box-shadow:0 14px 28px rgba(162,28,175,.15); transition:transform .08s, box-shadow .15s; }
    .startBtn:hover{ transform:translateY(-1px); box-shadow:0 18px 36px rgba(162,28,175,.22) }
    .hint{margin-top:10px; font-size:12px; color:var(--sub)}
  </style>
</head>
<body>
  <div class="card" id="app"></div>

  <script>
    (function () {
      const app = document.getElementById('app');
      const el = (tag, cls, text) => { const x = document.createElement(tag); if (cls) x.className = cls; if (text!=null) x.textContent = text; return x; };

      // ------ ÊµÅÁ®ãË®≠ÂÆö ------
      const flow = [
        { id:1, q:"Á¨¨‰∏ÄÈ°åÔºö‰Ω†ÊòüÊúü‰∫îË¶ÅË∑üÊàëÂá∫ÂéªÂóéÔºü",
          opts:[ { id:"1a", label:"Â•ΩÔºåÊàëÈ°òÊÑè><", next:2 }, { id:"1b", label:"ÂÜçÁúãÁúã@@", result:":(" } ] },
        { id:2, q:"Á¨¨‰∫åÈ°åÔºöÈÇ£‰Ω†ÊòüÊúü‰∫îÊôö‰∏äË¶ÅË∑üÊàë‰∏ÄËµ∑Áù°Ë¶∫ÂóéÔºü",
          opts:[ { id:"2a", label:"Â•Ω ><", next:3 }, { id:"2b", label:"‰∏çË°åÔºåÊàëÂ™ΩÂ™ΩÊúÉÁîüÊ∞£ÔºÅ„ÄÇ", result:":(" } ] },
        { id:3, q:"Á¨¨‰∏âÈ°åÔºöÈÇ£‰Ω†Ë¶ÅÂ∏∂ÂπæÂÄãÂ•óÂ•óÔºü",
          opts:[ { id:"3a", label:"4ÂÄã‰ª•‰∏ä", next:4 }, { id:"3b", label:"ÂÖ∂‰ªñ", result:"Â§™Â∞ë‰∫ÜÔºåÂÜçÁµ¶‰Ω†‰∏ÄÊ¨°Ê©üÊúÉ„ÄÇ", next:3 } ] },
        { id:4, q:"Á¨¨ÂõõÈ°åÔºöÈÇ£‰Ω†ÂñúÊ≠°ÊàëÂóéÔºü",
          opts:[ { id:"4a", label:"ÂæàÂñúÁøªüëâüëà", result:"Êàë‰πüÊòØ„Ñõ", next:5 },
                 { id:"4b", label:"‰∏çÂ§™Á¢∫ÂÆöÔºåÂèØËÉΩË¶ÅÂÜçËßÄÂØü‰∏Ä‰∏ãÔºÅ", result:"Â•Ω„ÑÖQQ" },
                 { id:"4c", label:"‰∏çÂñúÁøªQQ", result:"ÂèØÊÉ°" } ] },
        { id:5, q:"Á¨¨‰∫îÈ°åÔºöÈÇ£‰Ω†Ë¶ÅË∑üÊàë‰∫§ÂæÄÂóéÔºü",
          opts:[ { id:"5a", label:"Â•ΩÔºÅ", result:"0.0 <3 <3 <3", next:6 },
                 { id:"5b", label:"‰∏çÂ•ΩÔºÅ", result:"GAMEOVER" },
                 { id:"5c", label:"ÊàëÂÜçÊÉ≥ÊÉ≥„ÑÖÔºå‰Ω†‰∏çË¶ÅÂ§™agressiveÂï¶ÔºÅ", result:"GAMEOVER" } ] },
        { id:6, q:"Á¨¨ÂÖ≠È°åÔºöÈÄÅ‰Ω†‰∏ÄÂÄãÁ¶ÆÁâ©ÔºÅ",
          opts:[ { id:"6a", label:"ÊòØ‰ªÄÈ∫ºÔºÅÔºÅÔºÅÔºüÔºüÔºü", result:"üéÅ ÁúãÁúãÈÄôÂÄãÔºÅ", giftNow:true },
                 { id:"6b", label:"‰∏çÊÉ≥Áü•ÈÅìÔºÅ", result:"ÁÆ°‰Ω†ÁöÑ üò§", giftDelay:1000 } ] },
      ];

      // ------ Èü≥ÊïàÔºàÂïµ / ÂèÆÔºâ ------
      let audioCtx = null;
      function ensureAudio() {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        if (audioCtx.state === 'suspended') audioCtx.resume();
      }
      // ÂïµÔºöÁü≠‰øÉ‰∏ãÊªëÂåÖÁµ°
      function playClick() {
        try {
          ensureAudio();
          const t0 = audioCtx.currentTime;
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          osc.type = 'sine';
          osc.frequency.setValueAtTime(240, t0);
          osc.frequency.exponentialRampToValueAtTime(120, t0 + 0.09);
          gain.gain.setValueAtTime(0.0001, t0);
          gain.gain.exponentialRampToValueAtTime(0.8, t0 + 0.01);
          gain.gain.exponentialRampToValueAtTime(0.0001, t0 + 0.12);
          osc.connect(gain).connect(audioCtx.destination);
          osc.start(t0); osc.stop(t0 + 0.14);
        } catch (e) {}
      }
      // ÂèÆÔºöÈõôÈü≥ÈöéÔºåÊüîÂíåÈ§òÈü≥
      function playResult() {
        try {
          ensureAudio();
          const now = audioCtx.currentTime;
          const env = audioCtx.createGain();
          env.gain.setValueAtTime(0.0001, now);
          env.gain.exponentialRampToValueAtTime(1.0, now + 0.01);
          env.gain.exponentialRampToValueAtTime(0.0001, now + 0.6);
          env.connect(audioCtx.destination);

          const o1 = audioCtx.createOscillator();
          o1.type = 'sine';
          o1.frequency.setValueAtTime(880, now); // A5
          o1.start(now); o1.stop(now + 0.25); o1.connect(env);

          const o2 = audioCtx.createOscillator();
          o2.type = 'sine';
          o2.frequency.setValueAtTime(1320, now + 0.18); // E6
          o2.start(now + 0.18); o2.stop(now + 0.6); o2.connect(env);
        } catch (e) {}
      }

      // ---- Á¶ÆÁâ©ÂúñÔºàBase64 ÊàñÊ™îÊ°àË∑ØÂæëÈÉΩÂèØÔºõÈ†êË®≠Áî®Ê™îÊ°àË∑ØÂæëÔºâ----
      // Ëã•‰Ω†Ë¶ÅÁî® Base64ÔºåÊîπÊàê const GIFT_SRC = "data:image/png;base64,.....";
      const GIFT_SRC = "./sagami.png";

      // ---- ÁãÄÊÖã ----
      let soundUnlocked = false;
      let currentId = 1, resultMsg = null, pendingNext, finished=false, showGift=false, giftRevealed=false;

      // ÈñãÂ†¥ÔºöÈü≥ÊïàËß£Èéñ
      function renderStart(){
        app.innerHTML = '';
        const box = el('div','center');
        const btn = el('button','startBtn','ÈªûÊàëÈñãÂßãÔºÅ');
        btn.onclick = () => { ensureAudio(); playClick(); soundUnlocked = true; render(); };
        box.appendChild(btn);
        app.appendChild(box);
      }

      function render(){
        if (!soundUnlocked) { renderStart(); return; }

        app.innerHTML='';
        const step = flow.find(s => s.id === currentId);

        if (!finished && step){
          app.appendChild(el('h1', null, step.q));
          const box = el('div','options');
          step.opts.forEach(opt => {
            const b = el('button','btn'); b.innerHTML = `<div>${opt.label}</div>`;
            b.onclick = () => { playClick(); handleOption(opt); };
            box.appendChild(b);
          });
          app.appendChild(box);
          if (resultMsg) app.appendChild(el('div','msg',resultMsg));
          return;
        }

        const end = el('div','end');
        if (!showGift){
          end.appendChild(el('div','heart','üòñ'));
          if (resultMsg) end.appendChild(el('div','msg',resultMsg));
          end.appendChild(el('div','msg','Ë¨ùË¨ù‰Ω†ÁöÑÂõûÁ≠îÔºÅ'));
          app.appendChild(end);
        } else {
          end.appendChild(el('div','giftTip','üëâ ÂÜçÈªûÊìäÂúñÁâá‰∏ÄÊ¨°'));
          const img = new Image();
          img.src = GIFT_SRC; img.alt = "gift";
          img.className = 'giftImg' + (giftRevealed ? ' revealed' : '');
          img.onclick = () => { playClick(); if (!giftRevealed){ giftRevealed = true; img.classList.add('revealed'); } };
          app.appendChild(end);
          end.appendChild(img);
        }
      }

      function handleOption(opt){
        resultMsg = opt.result || null;
        if (resultMsg) playResult(); // Âê´ üéÅ ‰πüÊúÉÂèÆ

        if (typeof opt.next === 'number'){
          pendingNext = opt.next;
          if (!opt.result){ currentId = opt.next; pendingNext = undefined; render(); return; }
          render();
          setTimeout(()=>{ resultMsg=null; currentId=pendingNext; pendingNext=undefined; render(); },1200);
        } else {
          if (opt.giftNow){
            playResult();
            finished=true; showGift=true; giftRevealed=false;
            setTimeout(()=>{ resultMsg=null; render(); },800);
            render(); return;
          }
          if (opt.giftDelay){
            finished=true; showGift=false; giftRevealed=false;
            render(); setTimeout(()=>{ showGift=true; render(); },opt.giftDelay); return;
          }
          if (!opt.result) resultMsg='Ë¨ùË¨ù‰Ω†ÁöÑÂõûË¶ÜÔºÅ';
          finished=true; showGift=false; render();
        }
      }

      // ÂÖ•Âè£
      renderStart();
    })();
  </script>
</body>
</html>



